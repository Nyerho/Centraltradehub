<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Account</title>

    <!-- Use local CSS paths instead of the external 404 -->
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/responsive.css" />
    <!-- If your CSS is under /css, use css/style.css and css/responsive.css instead -->

    <!-- Firebase compat SDKs: ensure global window.firebase is available -->
    <script src="js/firebase-config.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore-compat.js"></script>
    <script>
      // Initialize Firebase if not already initialized (match platform style)
      (function(){
        if (window.firebase && (!firebase.apps || firebase.apps.length === 0)) {
          var config = window.FB_CONFIG || window.firebaseConfig;
          if (config) firebase.initializeApp(config);
        }
      })();
    </script>
    <script src="js/user-state.js"></script>
    <!-- Optional Bootstrap if you’re using it globally -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" />
</head>
<body class="account-page">
    <header class="container py-3">
        <h1 class="h3">Account Settings</h1>
        <p class="text-muted">Update your profile, email, and password securely.</p>
    </header>

    <main class="container">
        <form id="account-form" class="row g-3">
            <div class="col-12">
                <h2 class="h5">Profile</h2>
            </div>
            <div class="col-md-6">
                <label class="form-label" for="displayName">Name</label>
                <input type="text" class="form-control" id="displayName" placeholder="Your name" />
            </div>
            <div class="col-md-6">
                <label class="form-label" for="phoneNumber">Phone Number</label>
                <input type="tel" class="form-control" id="phoneNumber" placeholder="e.g. +1 555 123 4567" />
            </div>

            <div class="col-12">
                <h2 class="h5 mt-4">Email</h2>
            </div>
            <div class="col-md-6">
                <label class="form-label" for="email">Email</label>
                <input type="email" class="form-control" id="email" placeholder="you@example.com" />
                <div class="form-text">Changing email requires your current password to re-authenticate.</div>
            </div>

            <div class="col-12">
                <h2 class="h5 mt-4">Password</h2>
            </div>
            <div class="col-md-6">
                <label class="form-label" for="currentPassword">Current Password</label>
                <input type="password" class="form-control" id="currentPassword" placeholder="Enter current password" />
                <div class="form-text">Required to change email or password.</div>
            </div>
            <div class="col-md-6">
                <label class="form-label" for="newPassword">New Password</label>
                <input type="password" class="form-control" id="newPassword" placeholder="Enter new password" />
            </div>
            <div class="col-md-6">
                <label class="form-label" for="confirmPassword">Confirm New Password</label>
                <input type="password" class="form-control" id="confirmPassword" placeholder="Re-enter new password" />
            </div>

            <div class="col-12 mt-4">
                <button class="btn btn-primary" type="submit">Save Changes</button>
                <span id="save-status" class="ms-3 text-muted"></span>
            </div>
        </form>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="account.js"></script>

    <!-- Back to Dashboard button -->
    <nav class="account-nav" style="margin: 12px 0;">
        <a id="back-to-dashboard" href="dashboard.html" style="text-decoration: none; font-weight: 600;">← Back to Dashboard</a>
    </nav>

    <!-- Toast/notification for save success -->
    <div id="save-toast" role="status" aria-live="polite" style="display: none; position: fixed; top: 16px; right: 16px; background: #16a34a; color: white; padding: 10px 14px; border-radius: 6px; box-shadow: 0 2px 8px rgba(0,0,0,0.2); z-index: 9999;">
        Changes saved
    </div>
</body>
</html>